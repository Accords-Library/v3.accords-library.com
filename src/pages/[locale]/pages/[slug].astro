---
import AppEmptyLayout from "components/AppLayout/AppEmptyLayout.astro";
import Page from "src/pages/[locale]/api/pages/partial.astro";
import { payload } from "src/shared/payload/payload-sdk";
import { fetchOr404 } from "src/utils/responses";

const { slug } = Astro.params;

const page = await fetchOr404(() => payload.getPage(slug!));
if (page instanceof Response) {
  return page;
}
---

{
  /* ------------------------------------------- HTML ------------------------------------------- */
}

<AppEmptyLayout
  parentPages={page.parentPages}
  backgroundIllustration={page.thumbnail?.url}
>
  <Page slug={page.slug} lang={Astro.locals.currentLocale} page={page} />
</AppEmptyLayout>
