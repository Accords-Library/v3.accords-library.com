---
import CategoryCard from "./CategoryCard.astro";
import { getI18n } from "src/i18n/i18n";
import { cache } from "src/utils/payload";

const { getLocalizedUrl, getLocalizedMatch } = await getI18n(Astro.locals.currentLocale);
---

{/* ------------------------------------------- HTML ------------------------------------------- */}

{
  cache.config.home.folders.map(({ slug, translations, darkThumbnail, lightThumbnail }) => (
    <CategoryCard
      img={
        darkThumbnail && lightThumbnail ? { dark: darkThumbnail, light: lightThumbnail } : undefined
      }
      name={getLocalizedMatch(translations).name}
      href={getLocalizedUrl(`/folders/${slug}`)}
    />
  ))
}
