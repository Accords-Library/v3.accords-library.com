---
import GenericPreview from "components/Previews/GenericPreview.astro";
import { getI18n } from "src/i18n/i18n";
import type { EndpointAudio } from "src/shared/payload/payload-sdk";

interface Props {
  audio: EndpointAudio;
}

const { getLocalizedMatch, getLocalizedUrl, t } = await getI18n(Astro.locals.currentLocale);

const {
  audio: { id, translations, tagGroups, filename, thumbnail },
} = Astro.props;

const { title } = translations.length > 0 ? getLocalizedMatch(translations) : { title: filename };

// TODO: Add this later
// const attributes = [
//   {
//     title: "Duration",
//     icon: "material-symbols:hourglass-empty",
//     values: [duration.toString()],
//   },
// ];
---

{/* ------------------------------------------- HTML ------------------------------------------- */}

<GenericPreview
  title={title}
  thumbnail={thumbnail}
  href={getLocalizedUrl(`/audios/${id}`)}
  tagGroups={tagGroups}
  icon="material-symbols:music-note"
  iconHoverLabel={t("global.previewTypes.audio")}
  smallTitle
/>
