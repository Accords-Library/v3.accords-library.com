---
import Button from "components/Button.astro";
import Tooltip from "components/Tooltip.astro";
import { getI18n } from "translations/translations";

interface Props {
  withTitle?: boolean | undefined;
  class?: string | undefined;
}

const { withTitle, class: className } = Astro.props;
const { t } = await getI18n(Astro.locals.currentLocale);

const { currentCurrency } = Astro.locals;
---

{
  /* ------------------------------------------- HTML ------------------------------------------- */
}

<Tooltip trigger="click" class={className}>
  <div id="content" slot="tooltip-content">
    <a
      class:list={{ current: currentCurrency === "usd" }}
      href="?action-currency=usd">USD</a
    >
    <a
      class:list={{ current: currentCurrency === "eur" }}
      href="?action-currency=eur">EUR</a
    >
  </div>
  <Button
    icon="material-symbols:currency-exchange"
    title={withTitle ? currentCurrency.toUpperCase() : undefined}
    ariaLabel={t("header.topbar.currency.tooltip")}
  />
</Tooltip>

{
  /* ------------------------------------------- CSS -------------------------------------------- */
}

<style>
  #content {
    display: grid;
    gap: 0.5em;

    & > .current {
      color: var(--color-base-750);
      text-decoration: underline 0.08em var(--color-base-650);
    }
  }
</style>
