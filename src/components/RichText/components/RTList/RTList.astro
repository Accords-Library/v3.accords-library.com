---
import type { RichTextContext } from "src/utils/richText";
import RTBasicListItem from "./components/RTBasicListItem.astro";
import RTCheckListItem from "./components/RTCheckListItem.astro";

interface Props {
  node: {
    type: string;
    version: number;
    listType: string;
    children: {
      type: string;
      version: number;
      [k: string]: unknown;
      children: {
        type: string;
        version: number;
        [k: string]: unknown;
      }[];
    }[];
    [k: string]: unknown;
  };
  context: RichTextContext;
}

const { node, context } = Astro.props;
---

{
  node.listType === "number" ? (
    <ol>
      {node.children.map((node) => (
        <RTBasicListItem node={node} context={context} />
      ))}
    </ol>
  ) : node.listType === "bullet" ? (
    <ul>
      {node.children.map((node) => (
        <RTBasicListItem node={node} context={context} />
      ))}
    </ul>
  ) : node.listType === "check" ? (
    <ul>
      {node.children.map((node) => (
        <RTCheckListItem node={node} context={context} />
      ))}
    </ul>
  ) : (
    <p>
      {`Unknown list type: ${node.listType}. Please contact website technical administrator.`}
    </p>
  )
}
