---
import HeaderTitle from "components/HeaderTitle.astro";
import RichText from "components/RichText/RichText.astro";
import type { RichTextSectionBlock } from "src/shared/payload/payload-sdk";
import type { RichTextContext } from "src/utils/richText";

interface Props {
  node: RichTextSectionBlock;
  context: RichTextContext;
}

const { node, context } = Astro.props;
---

{/* ------------------------------------------- HTML ------------------------------------------- */}

<HeaderTitle id={node.anchorHash} header={context.depth + 1}>
  <span>{`${node.anchorHash} `}</span>
  {node.fields.blockName}
</HeaderTitle>

<RichText content={node.fields.content} context={{ ...context, depth: context.depth + 1 }} />

{/* ------------------------------------------- CSS -------------------------------------------- */}

<style>
  span {
    color: var(--color-base-650);
    font-weight: 500;
    font-size: 70%;
    place-self: start;
    margin-top: 0.33em;
  }
</style>
